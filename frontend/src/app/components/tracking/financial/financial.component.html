<mat-card appearance="outlined" style="width: 100%">
  @if (loading()) {
    <mat-card-header>
      <mat-card-title>Loading {{ title() }}...</mat-card-title>
    </mat-card-header>
  } @else {
    <mat-card-header>
      <mat-card-title>{{ title() }}</mat-card-title>
    </mat-card-header>

    <mat-card-actions align="end">
      <button mat-flat-button color="primary" (click)="onCreateClicked()">
        <mat-icon aria-hidden="true">add</mat-icon>
        Create New
      </button>
    </mat-card-actions>

    <mat-card-content>
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 100%">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef class="footer-cell-label">Totals</td>
          }
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let element" class="description-cell">
            {{ element.description }}
          </td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef>{{ recordCount() }} records</td>
          }
        </ng-container>

        <ng-container matColumnDef="recurring">
          <th mat-header-cell *matHeaderCellDef>Recurring</th>
          <td mat-cell *matCellDef="let element">{{ element.recurring ? 'Yes' : 'No' }}</td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef>{{ recurringCount() }} recurring</td>
          }
        </ng-container>

        <ng-container matColumnDef="recurrenceFrequency">
          <th mat-header-cell *matHeaderCellDef>Frequency</th>
          <td mat-cell *matCellDef="let element">{{ element.recurrenceFrequency }}</td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef></td>
          }
        </ng-container>

        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>Amount</th>
          <td mat-cell *matCellDef="let element">
            {{ element.amount | currency: element.currency }}
          </td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef>
              {{ signedTotalAmount().total | currency: signedTotalAmount().currency }}
            </td>
          }
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let element">{{ element.date | date: 'short' }}</td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef>--</td>
          }
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let element">
            <mat-icon aria-label="Edit" class="action-icon edit" (click)="onEditClicked(element)"
              >edit</mat-icon
            >
            <mat-icon
              aria-label="Delete"
              class="action-icon delete"
              (click)="onDeleteClicked(element)"
              >delete</mat-icon
            >
          </td>
          @if (showFooter()) {
            <td mat-footer-cell *matFooterCellDef>--</td>
          }
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        @if (showFooter()) {
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
        }
      </table>
      <mat-paginator
        [pageSizeOptions]="[10, 25, 50, 100]"
        [length]="dataSource.data.length"
        showFirstLastButtons
        aria-label="Select page of finance elements"
      >
      </mat-paginator>
    </mat-card-content>
  }
</mat-card>
